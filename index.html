<!-- 
SIMPLE DEFENSE STOCK TICKER UPDATE
Just replace the relevant sections in your existing oldcode.html

STEP 1: Update your Google Sheet with these tickers
================================
In your Google Sheet (https://docs.google.com/spreadsheets/d/1svXheHx4C1XVLITnVsW7nbT0v-B8tJxDviZG-Op2v58/), 
add these defense tickers:

Ticker | Price | Change%
-------|-------|--------
RTX    | =GOOGLEFINANCE("RTX","price") | =GOOGLEFINANCE("RTX","changepct")
LMT    | =GOOGLEFINANCE("LMT","price") | =GOOGLEFINANCE("LMT","changepct")
BA     | =GOOGLEFINANCE("BA","price") | =GOOGLEFINANCE("BA","changepct")
NOC    | =GOOGLEFINANCE("NOC","price") | =GOOGLEFINANCE("NOC","changepct")
GD     | =GOOGLEFINANCE("GD","price") | =GOOGLEFINANCE("GD","changepct")
LDOS   | =GOOGLEFINANCE("LDOS","price") | =GOOGLEFINANCE("LDOS","changepct")
HII    | =GOOGLEFINANCE("HII","price") | =GOOGLEFINANCE("HII","changepct")
PLTR   | =GOOGLEFINANCE("PLTR","price") | =GOOGLEFINANCE("PLTR","changepct")
KTOS   | =GOOGLEFINANCE("KTOS","price") | =GOOGLEFINANCE("KTOS","changepct")
AVAV   | =GOOGLEFINANCE("AVAV","price") | =GOOGLEFINANCE("AVAV","changepct")

Optional additions:
TDG    | =GOOGLEFINANCE("TDG","price") | =GOOGLEFINANCE("TDG","changepct")
HWM    | =GOOGLEFINANCE("HWM","price") | =GOOGLEFINANCE("HWM","changepct")
RDW    | =GOOGLEFINANCE("RDW","price") | =GOOGLEFINANCE("RDW","changepct")
LUNR   | =GOOGLEFINANCE("LUNR","price") | =GOOGLEFINANCE("LUNR","changepct")

STEP 2: Replace the stock ticker CSS section in your HTML
================================
Find the .stock-ticker-section section in your CSS and replace with this:
-->

<style>
/* Enhanced Stock Ticker - Reddit Style */
.stock-ticker-section {
    margin: 20px 0 30px 0;
    background: var(--surface);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    overflow: hidden;
}

.stock-ticker-header {
    padding: 12px 16px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-secondary);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.ticker-sort-controls {
    display: flex;
    gap: 8px;
    font-size: 9px;
    font-weight: 400;
}

.ticker-sort-btn {
    background: none;
    border: 1px solid var(--border-medium);
    color: var(--text-tertiary);
    padding: 3px 8px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
}

.ticker-sort-btn:hover {
    background: var(--bg-tertiary);
}

.ticker-sort-btn.active {
    background: var(--text-primary);
    color: var(--bg-primary);
    border-color: var(--text-primary);
}

.ticker-scroll-wrapper {
    position: relative;
    overflow: hidden;
    padding: 16px 0;
}

.ticker-scroll-content {
    display: flex;
    animation: scroll-ticker 60s linear infinite;
    padding: 0 20px;
}

.ticker-scroll-content:hover {
    animation-play-state: paused;
}

@keyframes scroll-ticker {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-50%);
    }
}

.stock-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin-right: 32px;
    padding: 8px 16px;
    background: var(--bg-secondary);
    border-radius: 6px;
    min-width: 140px;
    transition: all 0.2s;
    border: 1px solid var(--border-light);
}

.stock-item:hover {
    background: var(--bg-tertiary);
    transform: translateY(-2px);
    box-shadow: 0 2px 8px var(--shadow-soft);
}

.stock-ticker {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: 0.05em;
    margin-bottom: 4px;
}

.stock-price {
    font-size: 15px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 2px;
}

.stock-percent-change {
    font-size: 11px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 4px;
}

.stock-change-positive {
    color: #2d6a3d;
    background: #e8f5e8;
}

.stock-change-negative {
    color: #8d3636;
    background: #f5e8e8;
}

body.dark-mode .stock-change-positive {
    color: #72a672;
    background: #2a3d2a;
}

body.dark-mode .stock-change-negative {
    color: #b07a7a;
    background: #3d2a2a;
}

/* Reddit-style ranking table (alternative view) */
.ticker-table-view {
    display: none; /* Toggle with JS */
}

.ticker-table-view.active {
    display: block;
}

.ticker-table {
    width: 100%;
    border-collapse: collapse;
}

.ticker-table th {
    text-align: left;
    padding: 12px 16px;
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-tertiary);
    border-bottom: 1px solid var(--border-light);
    background: var(--bg-secondary);
}

.ticker-table td {
    padding: 12px 16px;
    font-size: 12px;
    border-bottom: 1px solid var(--border-light);
}

.ticker-rank {
    font-weight: 700;
    color: var(--text-secondary);
    width: 50px;
}

.ticker-company {
    font-weight: 600;
    color: var(--text-primary);
}

.ticker-table tbody tr:hover {
    background: var(--bg-secondary);
}
</style>

<!-- 
STEP 3: Replace the getStockTickerHtml function in your JavaScript
================================
Find the getStockTickerHtml() function around line 1891 and replace with this:
-->

<script>
/**
 * Generates the full HTML string for the stock ticker with enhanced styling.
 * Now includes sorting and table view options.
 * @returns {string} The HTML for the stock ticker section.
 */
function getStockTickerHtml() {
    if (stockData.length === 0) {
        return '';
    }
    
    // Sort by absolute percent change for activity ranking
    const sortedByActivity = [...stockData].sort((a, b) => 
        Math.abs(b.percentChange) - Math.abs(a.percentChange)
    );
    
    // Create scrolling ticker items
    const stockItemsHtml = stockData.map(stock => {
        const changeClass = stock.percentChange >= 0 ? 'stock-change-positive' : 'stock-change-negative';
        const changeSign = stock.percentChange >= 0 ? '+' : '';
        const arrow = stock.percentChange >= 0 ? 'â–²' : 'â–¼';

        return `
            <div class="stock-item">
                <span class="stock-ticker">${stock.ticker}</span>
                <span class="stock-price">$${stock.price.toFixed(2)}</span>
                <span class="stock-percent-change ${changeClass}">${arrow} ${changeSign}${stock.percentChange.toFixed(2)}%</span>
            </div>
        `;
    }).join('');

    // Duplicate for seamless loop
    const tickerContent = stockItemsHtml + stockItemsHtml;

    // Create table view with ranking
    const tableRowsHtml = sortedByActivity.map((stock, index) => {
        const changeClass = stock.percentChange >= 0 ? 'stock-change-positive' : 'stock-change-negative';
        const changeSign = stock.percentChange >= 0 ? '+' : '';
        const arrow = stock.percentChange >= 0 ? 'â–²' : 'â–¼';
        
        return `
            <tr>
                <td class="ticker-rank">${index + 1}</td>
                <td class="ticker-company">${stock.ticker}</td>
                <td class="stock-price">$${stock.price.toFixed(2)}</td>
                <td><span class="stock-percent-change ${changeClass}">${arrow} ${changeSign}${stock.percentChange.toFixed(2)}%</span></td>
            </tr>
        `;
    }).join('');

    return `
        <div class="stock-ticker-section">
            <div class="stock-ticker-header">
                <span>ðŸŽ¯ Defense Industrial Base Stocks (20-min delay)</span>
                <div class="ticker-sort-controls">
                    <button class="ticker-sort-btn active" onclick="toggleTickerView('scroll')">Scroll</button>
                    <button class="ticker-sort-btn" onclick="toggleTickerView('table')">Rank</button>
                </div>
            </div>
            
            <!-- Scrolling ticker view -->
            <div class="ticker-scroll-wrapper ticker-scroll-view">
                <div class="ticker-scroll-content">
                    ${tickerContent}
                </div>
            </div>
            
            <!-- Table ranking view -->
            <div class="ticker-table-view">
                <table class="ticker-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Ticker</th>
                            <th>Price</th>
                            <th>Change</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${tableRowsHtml}
                    </tbody>
                </table>
            </div>
        </div>
    `;
}

/**
 * Toggle between scrolling and table view
 */
function toggleTickerView(view) {
    const scrollView = document.querySelector('.ticker-scroll-view');
    const tableView = document.querySelector('.ticker-table-view');
    const scrollBtn = document.querySelector('.ticker-sort-btn:nth-child(1)');
    const tableBtn = document.querySelector('.ticker-sort-btn:nth-child(2)');
    
    if (view === 'scroll') {
        scrollView.style.display = 'block';
        tableView.classList.remove('active');
        scrollBtn.classList.add('active');
        tableBtn.classList.remove('active');
    } else {
        scrollView.style.display = 'none';
        tableView.classList.add('active');
        scrollBtn.classList.remove('active');
        tableBtn.classList.add('active');
    }
}
</script>

<!-- 
OPTIONAL ENHANCEMENTS
================================

1. Add volume data to your Google Sheet:
   Add a "Volume" column with: =GOOGLEFINANCE("RTX","volume")

2. Add news mentions counter:
   You could add a column that counts how many times the ticker appears 
   in your RSS feed articles that day

3. Add market cap ranking:
   Add "MarketCap" column: =GOOGLEFINANCE("RTX","marketcap")

4. Color code by sector:
   Primes (RTX, LMT, BA, NOC, GD) in one color
   Tech/Cyber (PLTR, KTOS) in another
   Emerging/Space (RDW, LUNR) in another

5. Add a "heat index" that combines:
   - Absolute price change %
   - Volume spike
   - News mentions
   
   This would give you a "most active" ranking similar to the Reddit ticker

================================
That's it! Your existing code already handles:
- Auto-refresh every 15 minutes
- Google Sheets integration
- Dark mode
- Mobile responsive
- Smooth scrolling

Just update your Google Sheet and swap in these code sections.
-->
